name = "pamphlet-viewer-workers"
main = "src/index.ts"
compatibility_date = "2024-11-11"
compatibility_flags = ["global_fetch_strictly_public"]

# Observability
observability = { enabled = true }

# Local development bindings (automatically used in dev mode)
# For local development with wrangler dev
[[r2_buckets]]
binding = "R2_BUCKET"
bucket_name = "pamphlet-storage-dev"
preview_bucket_name = "pamphlet-storage-dev"

[[kv_namespaces]]
binding = "META_KV"
id = "local-meta-kv"

# Variables
[vars]
ENVIRONMENT = "development"

# Secrets (set via .dev.vars for local dev, wrangler secret for production)
# SECRET_KEY should be a strong random string for HMAC token signing
# Local dev: Add "SECRET_KEY=your-secret-key-here" to .dev.vars
# Production: wrangler secret put SECRET_KEY

# Production environment (uncomment and configure for production deployment)
# [env.production]
# [[env.production.r2_buckets]]
# binding = "R2_BUCKET"
# bucket_name = "pamphlet-storage"
#
# [[env.production.kv_namespaces]]
# binding = "META_KV"
# id = "your-production-namespace-id-here"
#
# [env.production.vars]
# ENVIRONMENT = "production"
